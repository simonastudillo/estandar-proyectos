# Checklist M√≠nima por Proyecto

## Conocimientos involucrados
- Est√°ndares de calidad de software
- Clean Architecture y DDD
- Validaci√≥n y auditor√≠a de proyectos

## Responsable
- Equipo de desarrollo

## ¬øQu√© es?

El **Checklist M√≠nima por Proyecto** es una lista de verificaci√≥n esencial que
define los elementos b√°sicos, obligatorios e indispensables que debe cumplir
todo proyecto siguiendo este est√°ndar. Esta lista funciona como una **puerta de
calidad** que asegura que ning√∫n proyecto se considere completo sin haber
implementado los fundamentos cr√≠ticos de Clean Architecture, DDD y las mejores
pr√°cticas establecidas.

Este checklist act√∫a como un **filtro de calidad m√≠nima**, garantizando
consistencia entre proyectos y estableciendo una base s√≥lida para el
mantenimiento, escalabilidad y evoluci√≥n futura del software.

## ¬øPor qu√© es importante?

### ‚úÖ **Garant√≠a de Calidad M√≠nima**

- Establece est√°ndares no negociables para todos los proyectos
- Previene la entrega de software que no cumple requisitos b√°sicos
- Asegura consistencia en la calidad entre diferentes equipos y proyectos

### üéØ **Uniformidad y Consistencia**

- Todos los proyectos siguen la misma estructura base
- Facilita el onboarding entre proyectos del mismo est√°ndar
- Reduce la curva de aprendizaje para nuevos desarrolladores

### üîí **Cumplimiento Obligatorio**

- Define elementos que NO son opcionales
- Establece criterios objetivos de aceptaci√≥n
- Facilita auditor√≠as y revisiones de calidad

### üìã **Control de Proceso**

- Permite tracking del progreso del proyecto
- Identifica gaps antes de la entrega
- Facilita la planificaci√≥n y estimaci√≥n

### üöÄ **Base para Escalabilidad**

- Asegura que el proyecto tenga fundamentos s√≥lidos
- Facilita futuras expansiones y mantenimiento
- Previene deuda t√©cnica desde el inicio

## ¬øQu√© debe incluir?

### Elementos Arquitect√≥nicos

- Implementaci√≥n de Clean Architecture b√°sica
- Separaci√≥n clara de capas (Domain, Application, Infrastructure)
- Implementaci√≥n de principios SOLID b√°sicos
- Patrones de dise√±o fundamentales

### Documentaci√≥n M√≠nima

- README del proyecto con setup b√°sico
- Documentaci√≥n de APIs principales
- Diagramas de arquitectura b√°sicos
- Gu√≠as de instalaci√≥n y configuraci√≥n

### Testing B√°sico

- Cobertura m√≠nima de testing definida
- Tests unitarios para capa de dominio
- Tests de integraci√≥n para APIs principales
- Configuraci√≥n de CI/CD b√°sica

### Configuraci√≥n de Proyecto

- Configuraci√≥n de entornos (dev, staging, prod)
- Variables de entorno documentadas
- Scripts de automatizaci√≥n b√°sicos
- Configuraci√≥n de herramientas de calidad

## ¬øQu√© debo hacer?

### 1. **Definir Criterios M√≠nimos**

Establecer elementos no negociables por √°rea:

```bash
# Ejemplo de verificaci√≥n automatizada
#!/bin/bash
echo "üîç Verificando checklist m√≠nimo del proyecto..."

# Verificar estructura de archivos
echo "üìÅ Estructura de archivos..."
[ -f "README.md" ] && echo "‚úÖ README.md" || echo "‚ùå README.md FALTANTE"
[ -f "docker-compose.yml" ] && echo "‚úÖ docker-compose.yml" || echo "‚ùå docker-compose.yml FALTANTE"
[ -d "docs/" ] && echo "‚úÖ Carpeta docs/" || echo "‚ùå Carpeta docs/ FALTANTE"
```

### 2. **Implementar Verificaciones**

Crear scripts autom√°ticos que verifiquen cada elemento del checklist.

### 3. **Establecer Gates de Calidad**

Integrar el checklist en el proceso de CI/CD para bloquear deployments que no
cumplan requisitos m√≠nimos.

## Checklist por Categor√≠a

## üèóÔ∏è **Arquitectura y Estructura**

### Clean Architecture (Obligatorio)

- [ ] **Separaci√≥n de capas**: Domain, Application, Infrastructure claramente
      definidas
- [ ] **Independencia del framework**: L√≥gica de negocio NO depende de Laravel
- [ ] **Inyecci√≥n de dependencias**: Implementada correctamente
- [ ] **Interfaces y contratos**: Definidos para todas las dependencias externas

### Domain-Driven Design (Obligatorio)

- [ ] **Entidades del dominio**: Implementadas como POPOs (Plain Old PHP
      Objects)
- [ ] **Value Objects**: Para conceptos como Email, Money, etc.
- [ ] **Repositorios**: Interfaces en Domain, implementaci√≥n en Infrastructure
- [ ] **Casos de uso**: Implementados en Application layer

### Estructura de Carpetas (Obligatorio)

```
‚úÖ Estructura requerida:
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Domain/          # ‚úÖ Obligatorio
‚îÇ   ‚îú‚îÄ‚îÄ Application/     # ‚úÖ Obligatorio
‚îÇ   ‚îî‚îÄ‚îÄ Infrastructure/  # ‚úÖ Obligatorio
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/      # ‚úÖ Obligatorio
‚îÇ   ‚îú‚îÄ‚îÄ pages/          # ‚úÖ Obligatorio
‚îÇ   ‚îú‚îÄ‚îÄ services/       # ‚úÖ Obligatorio
‚îÇ   ‚îî‚îÄ‚îÄ types/          # ‚úÖ Obligatorio
```

### Principios SOLID (Verificaci√≥n m√≠nima)

- [ ] **Single Responsibility**: Clases con una sola responsabilidad
- [ ] **Dependency Inversion**: Dependencias a trav√©s de interfaces
- [ ] **Interface Segregation**: Interfaces espec√≠ficas, no gen√©ricas

## üì± **Frontend (React + TypeScript)**

### Configuraci√≥n Base (Obligatorio)

- [ ] **TypeScript configurado**: tsconfig.json con strict mode
- [ ] **ESLint + Prettier**: Configurados y funcionando
- [ ] **Vite configurado**: Con configuraci√≥n de producci√≥n
- [ ] **Redux Toolkit**: Store configurado con slices b√°sicos

### Componentes y Tipado (Obligatorio)

- [ ] **Tipado fuerte**: Props y estados con tipos expl√≠citos
- [ ] **Componentes reutilizables**: Al menos 3 componentes base
- [ ] **Custom hooks**: Para l√≥gica com√∫n reutilizable
- [ ] **Error boundaries**: Implementados para manejo de errores

### Configuraci√≥n m√≠nima requerida:

```typescript
// ‚úÖ tsconfig.json obligatorio
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true
  }
}

// ‚úÖ Componente tipado ejemplo
interface Props {
  title: string;
  onClick: () => void;
}

const Button: React.FC<Props> = ({ title, onClick }) => {
  return <button onClick={onClick}>{title}</button>;
};
```

## üöÄ **Backend (Laravel + Clean Architecture)**

### Configuraci√≥n PHP (Obligatorio)

- [ ] **PHP 8.2+**: Versi√≥n m√≠nima requerida
- [ ] **Composer configurado**: Con autoload PSR-4
- [ ] **Laravel 10+**: Framework base configurado
- [ ] **Variables de entorno**: .env.example documentado

### APIs y Rutas (Obligatorio)

- [ ] **Versionado de APIs**: `/api/v1/` implementado
- [ ] **Autenticaci√≥n b√°sica**: Laravel Sanctum configurado
- [ ] **Middleware**: B√°sico para CORS y autenticaci√≥n
- [ ] **Form Requests**: Para validaci√≥n de datos

### Base de Datos (Obligatorio)

- [ ] **Migraciones**: Para todas las tablas
- [ ] **Seeders b√°sicos**: Para datos de prueba
- [ ] **Models con relaciones**: Eloquent configurado
- [ ] **Soft deletes**: Implementado donde corresponde

```php
// ‚úÖ Estructura m√≠nima requerida
// UseCase obligatorio
class CreateUserUseCase
{
    public function __construct(
        private UserRepositoryInterface $userRepository
    ) {}

    public function execute(UserDTO $userData): User
    {
        // L√≥gica de negocio aqu√≠
    }
}

// ‚úÖ Repository interface obligatorio
interface UserRepositoryInterface
{
    public function save(User $user): User;
    public function findById(string $id): ?User;
}
```

## üóÑÔ∏è **Base de Datos (MySQL)**

### Configuraci√≥n y Estructura (Obligatorio)

- [ ] **MySQL 8.0+**: Versi√≥n m√≠nima
- [ ] **Charset UTF8MB4**: Configurado correctamente
- [ ] **√çndices b√°sicos**: En campos de b√∫squeda frecuente
- [ ] **Foreign keys**: Para todas las relaciones

### Convenciones (Obligatorio)

- [ ] **Nombres en ingl√©s**: Tablas y columnas
- [ ] **Snake_case**: Para nombres de tablas y columnas
- [ ] **Plural para tablas**: `users`, `posts`, etc.
- [ ] **Timestamps**: `created_at`, `updated_at`, `deleted_at`

```sql
-- ‚úÖ Estructura m√≠nima requerida
CREATE TABLE users (
    id CHAR(36) PRIMARY KEY,           -- ‚úÖ UUID obligatorio
    email VARCHAR(255) UNIQUE NOT NULL, -- ‚úÖ √çndice √∫nico
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL          -- ‚úÖ Soft delete
);
```

## üß™ **Testing (M√≠nimo Obligatorio)**

### Cobertura M√≠nima (Obligatorio)

- [ ] **Cobertura global**: M√≠nimo 70%
- [ ] **Tests unitarios**: Para todos los casos de uso
- [ ] **Tests de integraci√≥n**: Para APIs principales
- [ ] **Tests de componentes**: Para componentes React clave

### Configuraci√≥n Testing (Obligatorio)

- [ ] **PHPUnit configurado**: Para backend
- [ ] **Jest configurado**: Para frontend
- [ ] **CI/CD tests**: Tests ejecut√°ndose autom√°ticamente
- [ ] **Base de datos de testing**: Configurada y aislada

```php
// ‚úÖ Test unitario obligatorio (ejemplo)
class CreateUserUseCaseTest extends TestCase
{
    public function test_creates_user_successfully(): void
    {
        // Arrange
        $userData = new UserDTO('test@example.com', 'John Doe');

        // Act
        $result = $this->useCase->execute($userData);

        // Assert
        $this->assertInstanceOf(User::class, $result);
    }
}
```

## üê≥ **DevOps y Configuraci√≥n**

### Docker (Obligatorio)

- [ ] **docker-compose.yml**: Para desarrollo local
- [ ] **Dockerfile**: Para backend y frontend
- [ ] **Variables de entorno**: Configuradas para todos los servicios
- [ ] **Servicios b√°sicos**: App, DB, Redis m√≠nimo

### CI/CD B√°sico (Obligatorio)

- [ ] **GitHub Actions**: Configurado b√°sico
- [ ] **Tests autom√°ticos**: En cada push/PR
- [ ] **Build verification**: Para todos los servicios
- [ ] **Environment separation**: Dev, staging, prod

```yaml
# ‚úÖ docker-compose.yml m√≠nimo obligatorio
version: "3.8"
services:
  app:
    build: .
    volumes:
      - .:/var/www
  db:
    image: mysql:8.0
    environment:
      MYSQL_DATABASE: laravel
  redis:
    image: redis:alpine
```

## üìö **Documentaci√≥n M√≠nima**

### README (Obligatorio)

- [ ] **Descripci√≥n del proyecto**: Clara y concisa
- [ ] **Requisitos del sistema**: Versiones espec√≠ficas
- [ ] **Instalaci√≥n**: Pasos paso a paso
- [ ] **Configuraci√≥n**: Variables de entorno explicadas

### Documentaci√≥n T√©cnica (Obligatorio)

- [ ] **API Documentation**: OpenAPI/Swagger b√°sico
- [ ] **Diagrama de arquitectura**: B√°sico de capas
- [ ] **Gu√≠a de contribuci√≥n**: B√°sica
- [ ] **Changelog**: Para tracking de cambios

```markdown
# ‚úÖ README m√≠nimo obligatorio

## Requisitos

- PHP 8.2+
- Node.js 18+
- MySQL 8.0+
- Docker

## Instalaci√≥n

1. `git clone ...`
2. `docker-compose up`
3. `composer install`
4. `npm install`

## Configuraci√≥n

- Copiar `.env.example` a `.env`
- Configurar variables de base de datos
```

## üîß **Herramientas de Calidad**

### Linting y Formateo (Obligatorio)

- [ ] **PHP CS Fixer**: Configurado y funcionando
- [ ] **ESLint**: Para TypeScript/JavaScript
- [ ] **Prettier**: Para formateo autom√°tico
- [ ] **Pre-commit hooks**: Para verificaciones autom√°ticas

### An√°lisis Est√°tico (Obligatorio)

- [ ] **PHPStan**: Nivel 6 m√≠nimo para PHP
- [ ] **TypeScript**: Modo strict activado
- [ ] **Code quality gates**: En CI/CD
- [ ] **Security scanning**: Dependencias verificadas

## üîí **Seguridad B√°sica**

### Configuraciones de Seguridad (Obligatorio)

- [ ] **Variables sensibles**: En .env, NO en c√≥digo
- [ ] **CORS configurado**: Para APIs
- [ ] **Rate limiting**: B√°sico implementado
- [ ] **Input validation**: En todos los endpoints
- [ ] **Headers de seguridad**: CSP, HSTS, X-Frame-Options configurados
- [ ] **HTTPS**: Configurado para todos los ambientes
- [ ] **Logs de seguridad**: Configurados y monitoreados

### Validaciones Generales (Obligatorio)

- [ ] **Validaci√≥n de entrada**: Todos los inputs validados y sanitizados
- [ ] **Validaci√≥n de tipos**: Verificaci√≥n de tipos de datos
- [ ] **Validaci√≥n de rangos**: L√≠mites m√≠nimos y m√°ximos definidos
- [ ] **Whitelist approach**: Usar listas permitidas en lugar de prohibidas
- [ ] **Escape de salida**: HTML/SQL/JS escapado correctamente
- [ ] **Validaci√≥n de email**: Formato y existencia verificados
- [ ] **Validaci√≥n de URLs**: Protocolo y dominio verificados

### Manejo Seguro de Archivos (Obligatorio)

- [ ] **Validaci√≥n de tipo MIME**: Verificaci√≥n real del contenido
- [ ] **L√≠mites de tama√±o**: Restricciones implementadas
- [ ] **Extensiones permitidas**: Lista blanca de extensiones
- [ ] **Almacenamiento seguro**: Fuera del directorio p√∫blico
- [ ] **Nombres de archivo**: Generados aleatoriamente
- [ ] **Escaneo de virus**: Implementado para uploads
- [ ] **Control de acceso**: Verificaci√≥n de permisos para descarga

### Autenticaci√≥n y Autorizaci√≥n (Obligatorio)

- [ ] **Laravel Sanctum**: Configurado correctamente
- [ ] **Password hashing**: Bcrypt/Argon2 implementado
- [ ] **Password policies**: Longitud m√≠nima, complejidad, expiraci√≥n
- [ ] **Session security**: Regeneraci√≥n de ID, timeouts
- [ ] **CSRF protection**: Activada en formularios
- [ ] **JWT security**: Tokens con expiraci√≥n, algoritmos seguros
- [ ] **Two-Factor Auth**: Implementado para usuarios cr√≠ticos
- [ ] **Account lockout**: Protecci√≥n contra fuerza bruta
- [ ] **Audit logging**: Registro de accesos y cambios

### Configuraci√≥n de Base de Datos (Obligatorio)

- [ ] **Usuario espec√≠fico**: No usar root/admin para la aplicaci√≥n
- [ ] **Permisos m√≠nimos**: Solo los necesarios para la aplicaci√≥n
- [ ] **Conexi√≥n cifrada**: SSL/TLS habilitado
- [ ] **Prepared statements**: Usar en todas las queries
- [ ] **Backup cifrado**: Copias de seguridad protegidas
- [ ] **Auditor√≠a**: Logs de acceso y modificaciones
- [ ] **Data masking**: Ofuscar datos sensibles en desarrollo

### Prevenci√≥n de Vulnerabilidades OWASP (Obligatorio)

- [ ] **SQL Injection**: Prepared statements, validaci√≥n de entrada
- [ ] **XSS Prevention**: Sanitizaci√≥n, CSP, escape de salida
- [ ] **CSRF Protection**: Tokens CSRF en formularios
- [ ] **Clickjacking**: X-Frame-Options, CSP frame-ancestors
- [ ] **XXE Prevention**: Deshabilitar entidades externas en XML
- [ ] **Path Traversal**: Validaci√≥n de rutas de archivos
- [ ] **Command Injection**: Evitar exec/system con input del usuario
- [ ] **LDAP Injection**: Escapar caracteres especiales LDAP

### Testing de Seguridad (Obligatorio)

- [ ] **Security tests**: Tests automatizados de vulnerabilidades
- [ ] **Input fuzzing**: Tests con datos maliciosos
- [ ] **Authentication tests**: Verificaci√≥n de controles de acceso
- [ ] **Session tests**: Validaci√≥n de manejo de sesiones
- [ ] **OWASP ZAP**: Escaneo automatizado configurado
- [ ] **Dependency check**: Verificaci√≥n de vulnerabilidades en librer√≠as
- [ ] **Static analysis**: An√°lisis est√°tico de c√≥digo habilitado

### Monitoreo y Logging (Obligatorio)

- [ ] **Security logs**: Eventos de seguridad registrados
- [ ] **Failed login tracking**: Monitoreo de intentos fallidos
- [ ] **Privileged actions**: Logs de acciones administrativas
- [ ] **Error handling**: Manejo seguro de errores
- [ ] **Log rotation**: Rotaci√≥n y archivo de logs
- [ ] **SIEM integration**: Integraci√≥n con herramientas de monitoreo
- [ ] **Alertas**: Notificaciones de eventos cr√≠ticos

### Configuraci√≥n de Servidor (Obligatorio)

- [ ] **Firewall**: Configurado y activo
- [ ] **OS updates**: Sistema operativo actualizado
- [ ] **Service hardening**: Servicios innecesarios deshabilitados
- [ ] **SSL/TLS**: Configuraci√≥n segura (TLS 1.2+)
- [ ] **Security headers**: Implementados en servidor web
- [ ] **Directory listing**: Deshabilitado
- [ ] **Server tokens**: Informaci√≥n del servidor oculta

### Backup y Recuperaci√≥n (Obligatorio)

- [ ] **Backup strategy**: Estrategia de respaldo definida
- [ ] **Backup encryption**: Respaldos cifrados
- [ ] **Recovery testing**: Pruebas de recuperaci√≥n regulares
- [ ] **Offsite storage**: Almacenamiento fuera del sitio
- [ ] **Retention policy**: Pol√≠tica de retenci√≥n definida
- [ ] **Access control**: Control de acceso a respaldos
- [ ] **Incident response**: Plan de respuesta a incidentes

### Compliance y Documentaci√≥n (Obligatorio)

- [ ] **Privacy policy**: Pol√≠tica de privacidad definida
- [ ] **Data retention**: Pol√≠tica de retenci√≥n de datos
- [ ] **GDPR compliance**: Cumplimiento de GDPR si aplica
- [ ] **Security documentation**: Documentaci√≥n de seguridad actualizada
- [ ] **Security training**: Capacitaci√≥n del equipo en seguridad
- [ ] **Penetration testing**: Pruebas de penetraci√≥n programadas
- [ ] **Security review**: Revisiones de seguridad regulares

## üìä **Scripts de Verificaci√≥n**

### Script de Verificaci√≥n Completa

```bash
#!/bin/bash
# scripts/verify-minimum-checklist.sh

echo "üîç Verificando Checklist M√≠nimo del Proyecto..."

score=0
total=0

# Funci√≥n para verificar archivo
check_file() {
    local file=$1
    local description=$2
    total=$((total + 1))

    if [ -f "$file" ]; then
        echo "‚úÖ $description"
        score=$((score + 1))
    else
        echo "‚ùå $description - FALTANTE: $file"
    fi
}

# Funci√≥n para verificar directorio
check_dir() {
    local dir=$1
    local description=$2
    total=$((total + 1))

    if [ -d "$dir" ]; then
        echo "‚úÖ $description"
        score=$((score + 1))
    else
        echo "‚ùå $description - FALTANTE: $dir"
    fi
}

# Verificaciones de estructura
echo "üìÅ Verificando estructura de archivos..."
check_file "README.md" "README del proyecto"
check_file "docker-compose.yml" "Docker Compose"
check_file ".env.example" "Archivo de entorno ejemplo"
check_file "composer.json" "Composer configuration"
check_file "package.json" "Package.json frontend"

# Verificaciones de directorios
echo "üìÇ Verificando estructura de directorios..."
check_dir "backend/app/Domain" "Domain Layer"
check_dir "backend/app/Application" "Application Layer"
check_dir "backend/app/Infrastructure" "Infrastructure Layer"
check_dir "frontend/src/components" "Componentes React"
check_dir "frontend/src/types" "Tipos TypeScript"
check_dir "docs/" "Documentaci√≥n"

# Verificaciones de configuraci√≥n
echo "‚öôÔ∏è Verificando configuraciones..."
check_file "backend/phpunit.xml" "PHPUnit config"
check_file "frontend/tsconfig.json" "TypeScript config"
check_file "frontend/.eslintrc.json" "ESLint config"
check_file ".github/workflows/ci.yml" "GitHub Actions CI"

# Verificar tests
echo "üß™ Verificando tests..."
if [ -d "backend/tests/Unit" ] && [ -d "backend/tests/Feature" ]; then
    echo "‚úÖ Estructura de tests backend"
    score=$((score + 1))
else
    echo "‚ùå Estructura de tests backend - FALTANTE"
fi
total=$((total + 1))

# Verificaciones de seguridad
echo "üîí Verificando configuraciones de seguridad..."

# Verificar archivos de configuraci√≥n de seguridad
check_file "backend/config/sanctum.php" "Configuraci√≥n Laravel Sanctum"
check_file "backend/config/cors.php" "Configuraci√≥n CORS"

# Verificar middleware de seguridad
if [ -f "backend/app/Infrastructure/Http/Middleware/SecurityHeaders.php" ]; then
    echo "‚úÖ Middleware de security headers"
    score=$((score + 1))
else
    echo "‚ùå Middleware de security headers - FALTANTE"
fi
total=$((total + 1))

# Verificar configuraciones de validaci√≥n
if grep -r "validate\|FormRequest" backend/app/Infrastructure/Http/Controllers/ > /dev/null 2>&1; then
    echo "‚úÖ Validaciones en controladores"
    score=$((score + 1))
else
    echo "‚ùå Validaciones en controladores - FALTANTE"
fi
total=$((total + 1))

# Verificar autenticaci√≥n
if [ -d "backend/app/Application/UseCases/Auth" ]; then
    echo "‚úÖ Casos de uso de autenticaci√≥n"
    score=$((score + 1))
else
    echo "‚ùå Casos de uso de autenticaci√≥n - FALTANTE"
fi
total=$((total + 1))

# Verificar tests de seguridad
if [ -f "backend/tests/Feature/Security/AuthSecurityTest.php" ] || [ -d "backend/tests/Feature/Security" ]; then
    echo "‚úÖ Tests de seguridad"
    score=$((score + 1))
else
    echo "‚ùå Tests de seguridad - FALTANTE"
fi
total=$((total + 1))

# Verificar configuraci√≥n de rate limiting
if grep -r "throttle\|RateLimiter" backend/routes/ > /dev/null 2>&1; then
    echo "‚úÖ Rate limiting configurado"
    score=$((score + 1))
else
    echo "‚ùå Rate limiting - FALTANTE"
fi
total=$((total + 1))

# Verificar configuraci√≥n HTTPS
if grep -r "FORCE_HTTPS\|APP_URL.*https" backend/.env.example > /dev/null 2>&1; then
    echo "‚úÖ Configuraci√≥n HTTPS"
    score=$((score + 1))
else
    echo "‚ùå Configuraci√≥n HTTPS - FALTANTE"
fi
total=$((total + 1))

# Verificar manejo de archivos
if [ -f "backend/app/Infrastructure/Http/Controllers/Api/V1/FileUploadController.php" ]; then
    echo "‚úÖ Controlador de subida de archivos seguro"
    score=$((score + 1))
else
    echo "‚ùå Controlador de subida de archivos - FALTANTE"
fi
total=$((total + 1))

# Verificar sanitizaci√≥n frontend
if grep -r "DOMPurify\|sanitize" frontend/src/ > /dev/null 2>&1; then
    echo "‚úÖ Sanitizaci√≥n en frontend"
    score=$((score + 1))
else
    echo "‚ùå Sanitizaci√≥n en frontend - FALTANTE"
fi
total=$((total + 1))

# Verificar CSP
if grep -r "Content-Security-Policy\|helmet" frontend/src/ backend/app/ > /dev/null 2>&1; then
    echo "‚úÖ Content Security Policy configurado"
    score=$((score + 1))
else
    echo "‚ùå Content Security Policy - FALTANTE"
fi
total=$((total + 1))

if [ -d "frontend/src/__tests__" ] || [ -d "frontend/tests/" ]; then
    echo "‚úÖ Tests frontend"
    score=$((score + 1))
else
    echo "‚ùå Tests frontend - FALTANTE"
fi
total=$((total + 1))

# Calcular puntuaci√≥n
percentage=$((score * 100 / total))

echo ""
echo "üìä RESULTADO FINAL:"
echo "   Completado: $score/$total elementos ($percentage%)"

if [ $percentage -ge 90 ]; then
    echo "üéâ EXCELENTE: Proyecto cumple con est√°ndares m√≠nimos"
    exit 0
elif [ $percentage -ge 70 ]; then
    echo "‚ö†Ô∏è  ACEPTABLE: Proyecto necesita mejoras menores"
    exit 1
else
    echo "‚ùå CR√çTICO: Proyecto NO cumple est√°ndares m√≠nimos"
    exit 2
fi
```

### Script para Nuevos Proyectos

```bash
#!/bin/bash
# scripts/setup-minimum-project.sh

echo "üöÄ Configurando proyecto con est√°ndares m√≠nimos..."

# Crear estructura de directorios
mkdir -p backend/app/{Domain,Application,Infrastructure}
mkdir -p frontend/src/{components,pages,services,types,hooks}
mkdir -p docs/{api,architecture,guides}
mkdir -p tests/{backend,frontend}

# Crear archivos base
touch README.md
touch docker-compose.yml
touch .env.example
touch .gitignore

# Configurar archivos de configuraci√≥n b√°sicos
cat > frontend/tsconfig.json << 'EOF'
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx"
  }
}
EOF

echo "‚úÖ Estructura m√≠nima creada"
echo "üìã Ejecuta 'scripts/verify-minimum-checklist.sh' para verificar completitud"
```

## Tips

### üí° **Mejores Pr√°cticas**

1. **Automatizaci√≥n del Checklist**

   - Integra verificaciones en CI/CD
   - Usa scripts para verificaci√≥n r√°pida
   - Bloquea deploys que no cumplan requisitos m√≠nimos

2. **Evolutivo pero Estricto**

   - Permite agregar elementos al checklist
   - NO permite remover elementos obligatorios
   - Versiona el checklist junto con el proyecto

3. **Documentaci√≥n Clara**

   - Cada elemento debe ser verificable objetivamente
   - Incluye ejemplos de implementaci√≥n correcta
   - Documenta excepciones si las hay

4. **Feedback Temprano**
   - Verifica checklist en las primeras fases
   - No esperes al final del desarrollo
   - Facilita correcciones tempranas

### ‚ö†Ô∏è **Elementos NO Negociables**

- Separaci√≥n de capas Clean Architecture
- Tipado fuerte en TypeScript
- Cobertura m√≠nima de testing (70%)
- Documentaci√≥n b√°sica (README + API)
- Configuraci√≥n de entornos (dev, prod)
- Variables de entorno documentadas
- CI/CD b√°sico configurado

## Ejemplos

### Template de README M√≠nimo

````markdown
# [Nombre del Proyecto]

## Descripci√≥n

[Descripci√≥n clara del proyecto en 2-3 l√≠neas]

## Stack Tecnol√≥gico

- Backend: Laravel 10 + PHP 8.2
- Frontend: React 18 + TypeScript
- Base de datos: MySQL 8.0
- Contenedores: Docker

## Requisitos del Sistema

- Docker & Docker Compose
- PHP 8.2+
- Node.js 18+
- Composer

## Instalaci√≥n R√°pida

```bash
# 1. Clonar repositorio
git clone [url]

# 2. Configurar entorno
cp .env.example .env

# 3. Levantar servicios
docker-compose up -d

# 4. Instalar dependencias
docker-compose exec app composer install
docker-compose exec frontend npm install

# 5. Configurar base de datos
docker-compose exec app php artisan migrate:fresh --seed
```
````

## Configuraci√≥n

### Variables de Entorno Principales

- `DB_HOST`: Host de base de datos
- `DB_DATABASE`: Nombre de la base de datos
- `APP_KEY`: Clave de aplicaci√≥n Laravel
- `VITE_API_URL`: URL del backend para frontend

## Testing

```bash
# Backend
docker-compose exec app php artisan test

# Frontend
docker-compose exec frontend npm run test
```

## API Documentation

[Swagger/OpenAPI URL o enlace a documentaci√≥n]

## Contribuci√≥n

Ver [CONTRIBUTING.md](./CONTRIBUTING.md)

````
### Configuraci√≥n Docker M√≠nima
```yaml
# docker-compose.yml m√≠nimo
version: '3.8'

services:
  app:
    build:
      context: ./backend
      dockerfile: Dockerfile
    volumes:
      - ./backend:/var/www
    depends_on:
      - db
      - redis

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    volumes:
      - ./frontend:/app
    ports:
      - "3000:3000"

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: secret
      MYSQL_DATABASE: laravel
      MYSQL_USER: laravel
      MYSQL_PASSWORD: secret
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"

  redis:
    image: redis:alpine
    volumes:
      - redis_data:/data

volumes:
  mysql_data:
  redis_data:
````

### Script de Verificaci√≥n de Seguridad Espec√≠fico

```bash
#!/bin/bash
# scripts/verify-security-checklist.sh

echo "üîí Verificando Checklist de Seguridad Completo..."

security_score=0
security_total=0

# Funci√≥n para verificar configuraci√≥n de seguridad
check_security_config() {
    local config=$1
    local file=$2
    local description=$3
    security_total=$((security_total + 1))

    if grep -q "$config" "$file" 2>/dev/null; then
        echo "‚úÖ $description"
        security_score=$((security_score + 1))
    else
        echo "‚ùå $description - FALTANTE: $config en $file"
    fi
}

echo "üõ°Ô∏è Verificando configuraciones de seguridad..."

# Headers de seguridad
check_security_config "X-Frame-Options" "backend/app/Infrastructure/Http/Middleware/SecurityHeaders.php" "X-Frame-Options configurado"
check_security_config "Content-Security-Policy" "backend/app/Infrastructure/Http/Middleware/SecurityHeaders.php" "CSP configurado"
check_security_config "X-Content-Type-Options" "backend/app/Infrastructure/Http/Middleware/SecurityHeaders.php" "X-Content-Type-Options configurado"

# Configuraci√≥n de CORS
check_security_config "supports_credentials" "backend/config/cors.php" "CORS credentials configurado"
check_security_config "allowed_origins" "backend/config/cors.php" "CORS origins configurado"

# Rate limiting
check_security_config "throttle:" "backend/routes/api/v1/auth.php" "Rate limiting en auth"
check_security_config "RateLimiter::for" "backend/app/Providers/RouteServiceProvider.php" "Rate limiting configurado"

# Validaciones
if find backend/app/Infrastructure/Http/Requests -name "*.php" | head -1 > /dev/null 2>&1; then
    echo "‚úÖ Form Requests implementados"
    security_score=$((security_score + 1))
else
    echo "‚ùå Form Requests - FALTANTE"
fi
security_total=$((security_total + 1))

# Autenticaci√≥n segura
check_security_config "Hash::make" "backend/app/Application/UseCases/Auth" "Password hashing implementado"
check_security_config "createToken" "backend/app/Application/UseCases/Auth" "Token creation implementado"

# Tests de seguridad
if [ -d "backend/tests/Feature/Security" ] || find backend/tests -name "*Security*" | head -1 > /dev/null 2>&1; then
    echo "‚úÖ Tests de seguridad implementados"
    security_score=$((security_score + 1))
else
    echo "‚ùå Tests de seguridad - FALTANTE"
fi
security_total=$((security_total + 1))

# Frontend security
if [ -f "frontend/package.json" ]; then
    if grep -q "dompurify" frontend/package.json; then
        echo "‚úÖ DOMPurify instalado para sanitizaci√≥n"
        security_score=$((security_score + 1))
    else
        echo "‚ùå DOMPurify - FALTANTE"
    fi
    security_total=$((security_total + 1))

    if grep -q "helmet" frontend/package.json; then
        echo "‚úÖ Helmet.js instalado"
        security_score=$((security_score + 1))
    else
        echo "‚ùå Helmet.js - FALTANTE"
    fi
    security_total=$((security_total + 1))
fi

# Verificar .env.example
if [ -f ".env.example" ]; then
    if ! grep -q "real-password\|secret123\|actual-key" .env.example; then
        echo "‚úÖ .env.example no contiene secretos reales"
        security_score=$((security_score + 1))
    else
        echo "‚ùå .env.example contiene valores sensibles reales"
    fi
    security_total=$((security_total + 1))

    if grep -q "APP_KEY=\|DB_PASSWORD=\|JWT_SECRET=" .env.example; then
        echo "‚úÖ Variables de seguridad definidas en .env.example"
        security_score=$((security_score + 1))
    else
        echo "‚ùå Variables de seguridad faltantes en .env.example"
    fi
    security_total=$((security_total + 1))
fi

# Verificar configuraci√≥n SSL
if grep -q "FORCE_HTTPS\|APP_URL.*https" .env.example 2>/dev/null; then
    echo "‚úÖ Configuraci√≥n HTTPS definida"
    security_score=$((security_score + 1))
else
    echo "‚ùå Configuraci√≥n HTTPS - FALTANTE"
fi
security_total=$((security_total + 1))

# Calcular porcentaje de seguridad
security_percentage=$((security_score * 100 / security_total))

echo ""
echo "üìä RESULTADOS DE SEGURIDAD:"
echo "Puntuaci√≥n: $security_score/$security_total ($security_percentage%)"

if [ $security_percentage -ge 80 ]; then
    echo "üü¢ EXCELENTE nivel de seguridad"
elif [ $security_percentage -ge 60 ]; then
    echo "üü° ACEPTABLE nivel de seguridad - Mejorar elementos faltantes"
else
    echo "üî¥ INSUFICIENTE nivel de seguridad - CR√çTICO: Implementar elementos faltantes"
fi

echo ""
echo "üí° Para m√°s detalles, revisar:"
echo "   - docs/step_07/testing-seguridad-owasp.md"
echo "   - docs/step_04/autenticacion-laravel-sanctum.md"
```

### Script de Verificaci√≥n de Vulnerabilidades

```bash
#!/bin/bash
# scripts/check-vulnerabilities.sh

echo "üîç Verificando vulnerabilidades conocidas..."

# Backend - PHP dependencies
if [ -f "backend/composer.json" ]; then
    echo "üì¶ Verificando dependencias PHP..."
    cd backend

    # Verificar composer.lock existe
    if [ ! -f "composer.lock" ]; then
        echo "‚ùå composer.lock no existe - Ejecutar composer install"
        exit 1
    fi

    # Verificar vulnerabilidades conocidas con composer audit
    if composer audit --no-dev 2>/dev/null; then
        echo "‚úÖ No se encontraron vulnerabilidades en dependencias PHP"
    else
        echo "‚ö†Ô∏è Se encontraron vulnerabilidades en dependencias PHP"
        echo "üí° Ejecutar: composer audit --format=json para m√°s detalles"
    fi

    cd ..
fi

# Frontend - NPM dependencies
if [ -f "frontend/package.json" ]; then
    echo "üì¶ Verificando dependencias NPM..."
    cd frontend

    # Verificar package-lock.json existe
    if [ ! -f "package-lock.json" ]; then
        echo "‚ùå package-lock.json no existe - Ejecutar npm install"
        exit 1
    fi

    # Verificar vulnerabilidades con npm audit
    if npm audit --audit-level=high --json > /dev/null 2>&1; then
        echo "‚úÖ No se encontraron vulnerabilidades cr√≠ticas en dependencias NPM"
    else
        echo "‚ö†Ô∏è Se encontraron vulnerabilidades en dependencias NPM"
        echo "üí° Ejecutar: npm audit para m√°s detalles"
        echo "üí° Intentar: npm audit fix para solucionarlas autom√°ticamente"
    fi

    cd ..
fi

# Verificar archivos sensibles en el repositorio
echo "üîç Verificando archivos sensibles..."

sensitive_files=(
    ".env"
    "*.key"
    "*.pem"
    "*.p12"
    "*.pfx"
    "*password*"
    "*secret*"
    "*credential*"
)

found_sensitive=false
for pattern in "${sensitive_files[@]}"; do
    if find . -name "$pattern" -not -path "./.git/*" -not -path "./node_modules/*" -not -path "./vendor/*" | grep -q .; then
        echo "‚ö†Ô∏è Archivos sensibles encontrados: $pattern"
        find . -name "$pattern" -not -path "./.git/*" -not -path "./node_modules/*" -not -path "./vendor/*"
        found_sensitive=true
    fi
done

if [ "$found_sensitive" = false ]; then
    echo "‚úÖ No se encontraron archivos sensibles en el repositorio"
fi

# Verificar configuraciones inseguras comunes
echo "üîç Verificando configuraciones inseguras..."

# Verificar debug activado en producci√≥n
if grep -r "APP_DEBUG=true" . --exclude-dir=node_modules --exclude-dir=vendor 2>/dev/null; then
    echo "‚ö†Ô∏è DEBUG activado - Verificar que est√© desactivado en producci√≥n"
else
    echo "‚úÖ DEBUG no est√° hardcodeado como true"
fi

# Verificar URLs hardcodeadas
if grep -r "http://localhost\|127.0.0.1" . --exclude-dir=node_modules --exclude-dir=vendor --exclude="*.md" 2>/dev/null; then
    echo "‚ö†Ô∏è URLs de desarrollo hardcodeadas encontradas"
else
    echo "‚úÖ No se encontraron URLs de desarrollo hardcodeadas"
fi

echo ""
echo "‚úÖ Verificaci√≥n de vulnerabilidades completada"
echo "üí° Ejecutar regularmente para mantener la seguridad"
```

---

## Navegaci√≥n

[‚¨ÖÔ∏è Herramientas por lenguaje](./herramientas-por-lenguaje.md) |
[üè† README Principal](../../README.md) |
[Estilo y Formato de Documentaci√≥n ‚û°Ô∏è](./estilo-formato-documentacion.md)
